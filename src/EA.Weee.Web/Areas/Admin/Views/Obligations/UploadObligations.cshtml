@using EA.Weee.Web.RazorHelpers
@using EA.Weee.Web.Areas.Admin.Controllers
@using MvcNavigationHelpers
@model EA.Weee.Web.Areas.Admin.ViewModels.Obligations.UploadObligationsViewModel
@{
    ViewBag.Title = "Manage PCS obligations";
}

@(this.WeeeGds().BackLink(@Url.UrlFor<ObligationsController>(a => a.SelectAuthority())))

<header class="hgroup">
    <div>
        <h1 class="govuk-heading-l">Manage PCS obligations</h1>
    </div>
</header>

@using (Html.BeginForm("UploadObligations", "Obligations", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.Authority)
    <p>
        To upload your PCS's obligations, you need to first download the CSV template for the current compliance year. After this you can fill in the template with the data and upload it.
    </p>
    <p>
        <button aria-hidden="true" class="link-submit govuk-link govuk-link--no-visited-state" type="submit">Download template</button>
    </p>

    <table id="pcs-obligation-table" class="govuk-table">
        <caption class="govuk-table__caption govuk-visually-hidden">PCS obligation</caption>
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header">
                    PCS
                </th>
                <th class="govuk-table__header govuk-!-text-align-right">
                    Obligation updated (GMT)
                </th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            <tr>
                <td colspan="2">
                    <p>There are currently no PCS obligations uploaded</p>
                </td>
            </tr>
        </tbody>
    </table>
}
@section scripts {
    @if (ViewBag.TriggerDownload != null && ViewBag.TriggerDownload)
    {
        <script type="text/javascript">
            window.location = "@Html.Raw(@Url.Action("DownloadTemplate", new
                               {
                                    authority = Model.Authority
                               }))";
        </script>
    }
}