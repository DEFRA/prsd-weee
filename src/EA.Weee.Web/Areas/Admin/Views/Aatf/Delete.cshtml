@using EA.Weee.Web.Areas.Admin.Controllers
@using EA.Weee.Web.Areas.Admin.ViewModels.Home
@using MvcNavigationHelpers
@using EA.Weee.Web.Infrastructure
@using EA.Weee.Web.RazorHelpers
@using EA.Weee.Core.Helpers
@using EA.Weee.Core.Admin;
@using EA.Weee.Core.Organisations
@model EA.Weee.Web.Areas.Admin.ViewModels.Aatf.DeleteViewModel
@{
    ViewBag.Title = "Delete " + Model.FacilityType.ToDisplayString() + " - GOV.UK";
}


<section id="main-content">
    <header class="hgroup">
        <div>
            <h1 class="govuk-heading-l">Are you sure?</h1>
        </div>
    </header>
        @if (Model.CanDeleteFlags.HasFlag(CanAatfBeDeletedFlags.HasData))
        {
            <div>
                <p>
                    Has data
                </p>

                <p>
                    <a href="@(Url.UrlFor<AatfController>(u => u.Details(Model.AatfId)))">Cancel</a>
                </p>
            </div>

        }
        else
        {
            using (Html.BeginForm(actionName: "Delete", controllerName: "Aatf", method: FormMethod.Post))
            {
                    if (Model.CanDeleteFlags.HasFlag(CanAatfBeDeletedFlags.HasActiveUsers))
                    {
                        <div>
                            <p>
                                HAS USERS
                            </p>
                        </div>
                    }

                    if (Model.CanDeleteFlags.HasFlag(CanAatfBeDeletedFlags.OrganisationHasMoreAatfs))
                    {
                        <div>
                            <p>
                                ORG HAS MORE AATFS
                            </p>
                        </div>
                    }

                    @Html.AntiForgeryToken()
                    @Html.HiddenFor(m => m.AatfId)
                    @Html.HiddenFor(m => m.OrganisationId)
                    @Html.HiddenFor(m => m.CanDeleteFlags)
                    @Html.HiddenFor(m => m.FacilityType)

                    @(this.WeeeGds().Submit("Confirm"))
            }
        }
</section>