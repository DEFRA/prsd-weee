
@using EA.Weee.Web.RazorHelpers
@using EA.Prsd.Core.Web.Mvc.RazorHelpers
@using EA.Weee.Web.Areas.Scheme.ViewModels
@model EA.Weee.Web.Areas.Scheme.ViewModels.TransferEvidenceTonnageViewModel
@{
    ViewBag.Title = "Transfer tonnage - GOV.UK";
}

@section full_main_content
{
    @using (Html.BeginForm(actionName: "TransferTonnage", controllerName: "TransferEvidence", method: FormMethod.Post, htmlAttributes: new Dictionary<string, object>() { { "id", "TransferEvidenceForm" } }))
    {
        @Html.AntiForgeryToken()
        @Html.Gds().ValidationSummary()

        <h1 class="govuk-heading-l">
            Transfer tonnage to @Model.RecipientName from selected evidence notes
        </h1>
        <p class="govuk-body">Choose the tonnage that you would like to transfer from each category, for each evidence note that you have selected</p>

        @Html.Gds().CheckBoxFrontEndFor(m => m.TransferAllTonnage, new { @id = "transferAllTonnage", @class = "govuk-checkboxes__input" })

        <noscript>
            <div class="govuk-!-margin-top-3">
                <div class="govuk-button-group">
                    @this.WeeeGds().Button("Copy tonnage", new { name = "action", value = TransferEvidenceTonnageViewModel.ActionEnum.Copy, id = "copy-tonnage-button", @class = "govuk-!-width-one-quarter" })
                </div>
            </div>
        </noscript>
        <div class="govuk-!-padding-bottom-5"></div>

        for (var i = 0; i < Model.EvidenceNotesDataList.Count; i++)
        {
<div class="govuk-panel-grey-background govuk-!-margin-bottom-5 govuk-!-padding-left-2 govuk-!-padding-right-2">
    @{
        var note = Model.EvidenceNotesDataList.ElementAt(i);
    }

    @if (note.DisplayAatfName)
    {
        <h2 class="govuk-heading-m">@note.SubmittedBy (@note.AatfApprovalNumber)</h2>
    }

    <span class="govuk-label--s" id="reference-label">Reference&nbsp;</span><span class="govuk-body" aria-labelledby="reference-label">@note.ReferenceDisplay</span><br />
    <span class="govuk-label--s" id="received-label">WEEE received between&nbsp;</span><span class="govuk-body" aria-labelledby="received-label">@note.StartDate.ToShortDateString() - @note.EndDate.ToShortDateString()</span>

    <table id="transfer-notes-selection" class="govuk-table">
        <caption class="govuk-table__caption govuk-visually-hidden">Transfer tonnage for @note.SubmittedBy</caption>
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header govuk-!-text-align-left">
                    Category
                </th>
                <th class="govuk-table__header govuk-!-text-align-right">
                    Total received available (tonnes)
                </th>
                <th class="govuk-table__header govuk-!-text-align-right">
                    Total reused available (tonnes)
                </th>
                <th class="govuk-table__header govuk-!-text-align-right">
                    Transfer received (tonnes)
                </th>
                <th class="govuk-table__header govuk-!-text-align-right">
                    Transfer reused (tonnes)
                </th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">

            @for (var j = 0; j < Model.EvidenceNotesDataList.ElementAt(i).CategoryValues.Count; j++)
            {

                var category = Model.EvidenceNotesDataList.ElementAt(i).CategoryValues.ElementAt(j);

                <tr class="govuk-table__row">
                    <td class="govuk-table__cell">
                        @category.CategoryId. @category.CategoryDisplay
                    </td>
                    <td class="govuk-table__cell govuk-!-text-align-right">
                        @category.Received
                    </td>
                    <td class="govuk-table__cell govuk-!-text-align-right">
                        @category.Reused
                    </td>
                    <td class="govuk-table__cell govuk-!-text-align-right">
                    </td>
                    <td class="govuk-table__cell govuk-!-text-align-right">
                    </td>
                </tr>
            }

        </tbody>
    </table>
</div>
        }

        <input type="hidden" name="action" value="@TransferEvidenceTonnageViewModel.ActionEnum.Copy"/>
        <div class="govuk-!-margin-top-3">
            <div class="govuk-button-group">
                @this.WeeeGds().Button("Continue", new { name = "action", value = TransferEvidenceTonnageViewModel.ActionEnum.Save, id = "transfer-tonnage-button", @class = "govuk-!-width-one-quarter" })
            </div>
        </div>
    }
}
