@using EA.Weee.Web.RazorHelpers
@using EA.Prsd.Core.Web.Mvc.RazorHelpers
@using EA.Weee.Core.Helpers
@using MvcNavigationHelpers
@using EA.Weee.Web.Areas.Scheme.Controllers
@using EA.Weee.Web.Areas.Scheme.ViewModels.ManageEvidenceNotes

@model EA.Weee.Web.Areas.Scheme.ViewModels.TransferEvidenceNoteCategoriesViewModel

@{
    ViewBag.Title = "Transfer evidence - GOV.UK";
}

@section full_main_content
{
    @(this.WeeeGds().BackLink(Url.Action("Index", "ManageEvidenceNotes",
        new { @pcsId = Model.OrganisationId, @tab = ManageEvidenceNotesDisplayOptions.ViewAndTransferEvidence.ToDisplayString(), @selectedComplianceYear = Model.ComplianceYear })))

    <h1 class="govuk-heading-l">
        Transfer evidence to another scheme
    </h1>

    @Html.Gds().ValidationSummary()

    @using (Html.BeginForm(actionName: "TransferEvidenceNote", controllerName: "TransferEvidence", method: FormMethod.Post))
    {
        { Html.RenderPartial("~/Areas/Scheme/Views/Shared/_TransferCategoriesPartial.cshtml", Model); }
    }
}

@section scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            $('#SelectAllCheckboxesSection').css("display", "block");

            // case when selectAll is ticked => all checkboxes get selected, if selectAll is unticked => the other 14 checboxes will be unticked
            $('#all_checkbox_select_id').click(function () {
                $(".govuk-checkboxes__input").prop('checked', $(this).prop('checked'));
            });

            // case when if any of the 14th checkboxes is unticked => untick the selectAll too
            $('.allCategoryCheckBox').change(function () {
                var $this = $(this);

                if ($this.is(":checked")) {
                }
                else {
                    if ($('#all_checkbox_select_id').is(":checked")) {
                        $('#all_checkbox_select_id').prop("checked", false);
                    }
                }
            });

            // case when if all 14th checkboxes are ticked => selectAll gets ticked too
            $('.allCategoryCheckBox').change(function () {
                var a = $("input[type='checkbox'].allCategoryCheckBox");
                if (a.length == a.filter(":checked").length) {
                    $('#all_checkbox_select_id').prop("checked", true);
                }
            });
        });

    </script>
}
