@using EA.Prsd.Core.Web.Mvc.RazorHelpers
@using EA.Weee.Core.DataStandards
@using EA.Weee.Web.Infrastructure
@using EA.Weee.Web.RazorHelpers
@model EA.Weee.Web.Areas.AatfReturn.ViewModels.SentOnCreateSiteViewModel
@{
    ViewBag.Title = "Sent On WEEE";
}

<section id="main-content">
    <h1 class="govuk-heading-l">WEEE sent to another AATF/ATF for treatment</h1>
    <h2 class="govuk-heading-m">Which AATF/ATF was the WEEE sent to for treatment?</h2>
    @using (Html.BeginRouteForm(AatfRedirect.AatfOrganisationSelectedRoute, FormMethod.Get))
    {
        @Html.HiddenFor(m => m.WeeeSentOnId)
        @Html.HiddenFor(m => m.OrganisationId)
        @Html.HiddenFor(m => m.AatfId)
        @Html.HiddenFor(m => m.ReturnId)
        @Html.Hidden("javascriptDisabled", true)

        <div class="govuk-form-group" id="operatorButton" style="display: none">
            <button type="submit" class="govuk-button" formmethod="get" name="operatorButtonName">
                The operator address is the same as the AATF/ATF address
            </button>
        </div>
    }
    @using (Html.BeginRouteForm(AatfRedirect.AatfOrganisationSelectedRoute, FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.Gds().ValidationSummary()
        @Html.HiddenFor(m => m.OrganisationId)
        @Html.HiddenFor(m => m.ReturnId)
        @Html.HiddenFor(m => m.AatfId)
        @Html.HiddenFor(m => m.WeeeSentOnId)
        @Html.EditorFor(m => m.SiteAddressData)
        @Html.HiddenFor(m => m.SiteAddressId)

        <div class="govuk-!-padding-bottom-3"></div>
        <h2 class="govuk-heading-m">Which operator was the WEEE sent to for treatment?</h2>
        <div class="govuk-form-group" id="operatorCheckBox">
            <div class="govuk-checkboxes">
                <div class="govuk-checkboxes__item">
                    @if (Model.IsOperatorTheSameAsAATF)
                    {
                        <input name="IsOperatorTheSameAsAATF" class="govuk-checkboxes__input" id="IsOperatorTheSameAsAATF" onclick="IsOperatorSameAddress()" type="checkbox" value="true" checked />
                    }
                    else
                    {
                        <input name="IsOperatorTheSameAsAATF" class="govuk-checkboxes__input" id="IsOperatorTheSameAsAATF" onclick="IsOperatorSameAddress()" type="checkbox" value="true" />
                    }
                    <label class="govuk-label govuk-checkboxes__label" for="IsOperatorTheSameAsAATF" style="padding-top: 7px;">@Html.DisplayNameFor(m => m.IsOperatorTheSameAsAATF)</label> <br />
                </div>
            </div>
        </div>

        @Html.EditorFor(m => m.OperatorAddressData)
        @Html.HiddenFor(m => m.OperatorAddressId)

        <div class="govuk-!-padding-bottom-3"></div>
        <button type="submit" name="save" class="govuk-button" id="site-details">
            Save and continue
        </button>

    }
    @Html.RouteLink("Back", AatfRedirect.AatfSelectedRoute, new { returnId = Model.ReturnId, organisationId = Model.OrganisationId, aatfId = Model.AatfId, action = "Index", controller = "SentOnSiteSummaryList" }, new { @class = "govuk-back-link" })
</section>

@Scripts.Render("~/bundles/sent-on-operator-address")
@section scripts {
    <noscript>
        <style type="text/css">
            #operatorCheckBox {
                display: none;
            }

            #operatorButton {
                display: block !important;
            }
        </style>
    </noscript>
}