@using System.Web.Mvc.Html
@using EA.Prsd.Core.Web.Mvc.RazorHelpers
@using EA.Weee.Web.Infrastructure
@model EA.Weee.Web.Areas.AatfReturn.ViewModels.SelectYourPcsViewModel
@{
    ViewBag.Title = "Select Your PCS";
}

    <section id="main-content">
        @using (Html.BeginRouteForm(AatfRedirect.SelectPcsRouteName, new { reselect = true }))
        {
            @Html.AntiForgeryToken()
            @Html.Gds().ValidationSummary()

            <div class="govuk-!-padding-bottom-5"></div>
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                        <h1 class="govuk-heading-l govuk-fieldset__heading">
                            Select all the PCSs that you received WEEE from
                        </h1>
                    </legend>
                    <h2 class="govuk-heading-m">These PCSs will be available to all of your AATFs</h2>
                    <div class="govuk-checkboxes">
                        @for (var i = 0; i < Model.SchemeList.Count; i++)
                        {
                            <div class="govuk-checkboxes__item">
                                @{
                                    var selectedOption = @Model.SelectedSchemes.Count(p => p == Model.SchemeList[i].Id) > 0 ? "checked" : "";
                                }
                                <input type="checkbox" name="SelectedSchemes" value="@Model.SchemeList[i].Id" class="govuk-checkboxes__input" id="@Model.SchemeList[i].Name-@Model.SchemeList[i].Id" @selectedOption />
                                <label class="govuk-label govuk-checkboxes__label" for="@Model.SchemeList[i].Name-@Model.SchemeList[i].Id">
                                    @Model.SchemeList[i].SchemeName - @Model.SchemeList[i].ApprovalName
                                </label>
                            </div>
                            @Html.HiddenFor(m => Model.SchemeList[i].ApprovalName)
                            @Html.HiddenFor(m => Model.SchemeList[i].Id)
                            @Html.HiddenFor(m => Model.SchemeList[i].OrganisationId)
                            @Html.HiddenFor(m => Model.SchemeList[i].Name)
                            @Html.HiddenFor(m => Model.SchemeList[i].CanEdit)
                            @Html.HiddenFor(m => Model.SchemeList[i].CompetentAuthorityId)
                            @Html.HiddenFor(m => Model.SchemeList[i].IbisCustomerReference)
                            @Html.HiddenFor(m => Model.SchemeList[i].ObligationType)
                            @Html.HiddenFor(m => Model.SchemeList[i].SchemeDataAvailability)
                            @Html.HiddenFor(m => Model.SchemeList[i].SchemeName)
                            @Html.HiddenFor(m => Model.SchemeList[i].SchemeStatus)
                            @Html.HiddenFor(m => Model.SchemeList[i].Selected)
                        }
                    </div>
                </fieldset>
            </div>
            @Html.HiddenFor(m => m.OrganisationId)
            @Html.HiddenFor(m => m.ReturnId)
            <button type="submit" class="govuk-button">
                Save and continue
            </button>
        }
    </section>