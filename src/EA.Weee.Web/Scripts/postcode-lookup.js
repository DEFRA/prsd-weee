/**
 * @license
 * Ideal Postcodes <https://ideal-postcodes.co.uk>
 * Copyright IDDQD Limited
 * Postcode Lookup Bundled 2.3.0
 * Built on Postcode Lookup ~1.11.1
 * AGPL-3.0 Licence
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).IdealPostcodes=e.IdealPostcodes||{})}(this,(function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var v=setTimeout;function m(e){return Boolean(e&&void 0!==e.length)}function y(){}function g(e){if(!(this instanceof g))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],k(e,this)}function b(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,g._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void S(t.promise,e)}w(t.promise,r)}else(1===e._state?w:S)(t.promise,e._value)}))):e._deferreds.push(t)}function w(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof g)return e._state=3,e._value=t,void E(e);if("function"==typeof n)return void k((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,E(e)}catch(t){S(e,t)}var r,o}function S(e,t){e._state=2,e._value=t,E(e)}function E(e){2===e._state&&0===e._deferreds.length&&g._immediateFn((function(){e._handled||g._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)b(e,e._deferreds[t]);e._deferreds=null}function C(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function k(e,t){var n=!1;try{e((function(e){n||(n=!0,w(t,e))}),(function(e){n||(n=!0,S(t,e))}))}catch(e){if(n)return;n=!0,S(t,e)}}g.prototype.catch=function(e){return this.then(null,e)},g.prototype.then=function(e,t){var n=new this.constructor(y);return b(this,new C(e,t,n)),n},g.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},g.all=function(e){return new g((function(t,n){if(!m(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(e,t)}),n)}r[e]=s,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)i(s,r[s])}))},g.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,(function(t){i(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--o&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--o&&t(r)}for(var s=0;s<r.length;s++)i(s,r[s])}))},g.resolve=function(e){return e&&"object"==typeof e&&e.constructor===g?e:new g((function(t){t(e)}))},g.reject=function(e){return new g((function(t,n){n(e)}))},g.race=function(e){return new g((function(t,n){if(!m(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)g.resolve(e[r]).then(t,n)}))},g._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){v(e,0)},g._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const O={tls:!0,api_key:"",baseUrl:"api.ideal-postcodes.co.uk",version:"v1",strictAuthorisation:!1,timeout:1e4,header:{Accept:"application/json","Content-Type":"application/json"},tags:[],agent:{}};class A{constructor(e){this.config={...O,...e},this.config.header={...O.header,...e.header&&e.header}}url(){const{baseUrl:e,version:t}=this.config;return`${this.protocol()}://${e}/${t}`}protocol(){return this.config.tls?"https":"http"}}const j=e=>void 0===e?{}:Object.keys(e).reduce(((t,n)=>{const r=e[n],o=_(r);return o.length>0&&(t[n]=o),t}),{}),x=e=>"string"==typeof e,_=e=>{const t=[];return n=e,Array.isArray(n)?(e.forEach((e=>{T(e)&&t.push(e.toString()),x(e)&&t.push(e)})),t.join(",")):T(e)?e.toString():x(e)?e:"";var n},T=e=>"number"==typeof e,P=({timeout:e},t)=>T(e)?e:t.config.timeout,L=({header:e={}},t)=>({...t.config.header,...j(e)});class N extends Error{constructor(e){const t=new.target.prototype;super(),this.__proto__=t;const{message:n,httpStatus:r,metadata:o={}}=e;this.message=n,this.name="Ideal Postcodes Error",this.httpStatus=r,this.metadata=o,Error.captureStackTrace&&Error.captureStackTrace(this,N)}}class R extends N{constructor(e){super({httpStatus:e.httpStatus,message:e.body.message}),this.response=e}}class q extends R{}class U extends R{}class B extends U{}class F extends R{}class I extends F{}class D extends F{}class M extends R{}class H extends M{}class J extends M{}class G extends M{}class $ extends M{}class z extends R{}const W=e=>{const{httpStatus:t,body:n}=e;if((r=t)<200||r>=300){var r;if((e=>{return null!==(t=e)&&"object"==typeof t&&"string"==typeof e.message&&"number"==typeof e.code;var t})(n)){const{code:r}=n;if(4010===r)return new B(e);if(4040===r)return new H(e);if(4042===r)return new J(e);if(4044===r)return new G(e);if(4046===r)return new $(e);if(4020===r)return new I(e);if(4021===r)return new D(e);if(404===t)return new M(e);if(400===t)return new q(e);if(402===t)return new F(e);if(401===t)return new U(e);if(500===t)return new z(e)}return new N({httpStatus:t,message:JSON.stringify(n)})}},K=(e,t)=>[e.client.url(),e.resource,encodeURIComponent(t),e.action].filter((e=>void 0!==e)).join("/"),V=e=>{const{client:t}=e;return(n,r)=>t.config.agent.http({method:"GET",url:K(e,n),query:j(r.query),header:L(r,t),timeout:P(r,t)}).then((e=>{const t=W(e);if(t)throw t;return e}))},X=(e,t)=>(e=>{const{client:t,resource:n}=e;return e=>t.config.agent.http({method:"GET",url:`${t.url()}/${n}`,query:j(e.query),header:L(e,t),timeout:P(e,t)}).then((e=>{const t=W(e);if(t)throw t;return e}))})({resource:"addresses",client:e})(t),Y=e=>{const{client:t,timeout:n}=e,r=e.api_key||e.client.config.api_key,{licensee:o}=e;let i;i=void 0===o?{}:{licensee:o};const s={query:i,header:{}};return void 0!==n&&(s.timeout=n),((e,t,n)=>V({resource:"keys",client:e})(t,n))(t,r,s).then((e=>e.body.result))};var Q={exports:{}},Z=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},ee=Z,te=Object.prototype.toString;function ne(e){return"[object Array]"===te.call(e)}function re(e){return void 0===e}function oe(e){return null!==e&&"object"==typeof e}function ie(e){if("[object Object]"!==te.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function se(e){return"[object Function]"===te.call(e)}function ae(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),ne(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var ue={isArray:ne,isArrayBuffer:function(e){return"[object ArrayBuffer]"===te.call(e)},isBuffer:function(e){return null!==e&&!re(e)&&null!==e.constructor&&!re(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:oe,isPlainObject:ie,isUndefined:re,isDate:function(e){return"[object Date]"===te.call(e)},isFile:function(e){return"[object File]"===te.call(e)},isBlob:function(e){return"[object Blob]"===te.call(e)},isFunction:se,isStream:function(e){return oe(e)&&se(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:ae,merge:function e(){var t={};function n(n,r){ie(t[r])&&ie(n)?t[r]=e(t[r],n):ie(n)?t[r]=e({},n):ne(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)ae(arguments[r],n);return t},extend:function(e,t,n){return ae(t,(function(t,r){e[r]=n&&"function"==typeof t?ee(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},ce=ue;function le(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var fe=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(ce.isURLSearchParams(t))r=t.toString();else{var o=[];ce.forEach(t,(function(e,t){null!=e&&(ce.isArray(e)?t+="[]":e=[e],ce.forEach(e,(function(e){ce.isDate(e)?e=e.toISOString():ce.isObject(e)&&(e=JSON.stringify(e)),o.push(le(t)+"="+le(e))})))})),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},de=ue;function he(){this.handlers=[]}he.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},he.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},he.prototype.forEach=function(e){de.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var pe=he,ve=ue,me=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},ye=me,ge=function(e,t,n,r,o){var i=new Error(e);return ye(i,t,n,r,o)},be=ge,we=ue,Se=we.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),we.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),we.isString(r)&&s.push("path="+r),we.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Ee=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},Ce=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},ke=ue,Oe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ae=ue,je=Ae.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Ae.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function xe(e){this.message=e}xe.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},xe.prototype.__CANCEL__=!0;var _e=xe,Te=ue,Pe=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(be("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)},Le=Se,Ne=fe,Re=function(e,t){return e&&!Ee(t)?Ce(e,t):t},qe=function(e){var t,n,r,o={};return e?(ke.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=ke.trim(e.substr(0,r)).toLowerCase(),n=ke.trim(e.substr(r+1)),t){if(o[t]&&Oe.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o},Ue=je,Be=ge,Fe=Ke,Ie=_e,De=function(e){return new g((function(t,n){var r,o=e.data,i=e.headers,s=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Te.isFormData(o)&&delete i["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(c+":"+l)}var f=Re(e.baseURL,e.url);function d(){if(u){var r="getAllResponseHeaders"in u?qe(u.getAllResponseHeaders()):null,o={data:s&&"text"!==s&&"json"!==s?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u};Pe((function(e){t(e),a()}),(function(e){n(e),a()}),o),u=null}}if(u.open(e.method.toUpperCase(),Ne(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(Be("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){n(Be("Network Error",e,null,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Fe.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(Be(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Te.isStandardBrowserEnv()){var h=(e.withCredentials||Ue(f))&&e.xsrfCookieName?Le.read(e.xsrfCookieName):void 0;h&&(i[e.xsrfHeaderName]=h)}"setRequestHeader"in u&&Te.forEach(i,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:u.setRequestHeader(t,e)})),Te.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&"json"!==s&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(r=function(e){u&&(n(!e||e&&e.type?new Ie("canceled"):e),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r))),o||(o=null),u.send(o)}))},Me=ue,He=function(e,t){ve.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Je=me,Ge={"Content-Type":"application/x-www-form-urlencoded"};function $e(e,t){!Me.isUndefined(e)&&Me.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var ze,We={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(ze=De),ze),transformRequest:[function(e,t){return He(t,"Accept"),He(t,"Content-Type"),Me.isFormData(e)||Me.isArrayBuffer(e)||Me.isBuffer(e)||Me.isStream(e)||Me.isFile(e)||Me.isBlob(e)?e:Me.isArrayBufferView(e)?e.buffer:Me.isURLSearchParams(e)?($e(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Me.isObject(e)||t&&"application/json"===t["Content-Type"]?($e(t,"application/json"),function(e,t,n){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||We.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&Me.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw Je(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Me.forEach(["delete","get","head"],(function(e){We.headers[e]={}})),Me.forEach(["post","put","patch"],(function(e){We.headers[e]=Me.merge(Ge)}));var Ke=We,Ve=ue,Xe=Ke,Ye=function(e){return!(!e||!e.__CANCEL__)},Qe=ue,Ze=function(e,t,n){var r=this||Xe;return Ve.forEach(n,(function(n){e=n.call(r,e,t)})),e},et=Ye,tt=Ke,nt=_e;function rt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nt("canceled")}var ot=ue,it=function(e,t){t=t||{};var n={};function r(e,t){return ot.isPlainObject(e)&&ot.isPlainObject(t)?ot.merge(e,t):ot.isPlainObject(t)?ot.merge({},t):ot.isArray(t)?t.slice():t}function o(n){return ot.isUndefined(t[n])?ot.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function i(e){if(!ot.isUndefined(t[e]))return r(void 0,t[e])}function s(n){return ot.isUndefined(t[n])?ot.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function a(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var u={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return ot.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,r=t(e);ot.isUndefined(r)&&t!==a||(n[e]=r)})),n},st="0.24.0",at=st,ut={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){ut[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var ct={};ut.transitional=function(e,t,n){function r(e,t){return"[Axios v"+at+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,i){if(!1===e)throw new Error(r(o," has been removed"+(t?" in "+t:"")));return t&&!ct[o]&&(ct[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};var lt={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],s=t[i];if(s){var a=e[i],u=void 0===a||s(a,i,e);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:ut},ft=ue,dt=fe,ht=pe,pt=function(e){return rt(e),e.headers=e.headers||{},e.data=Ze.call(e,e.data,e.headers,e.transformRequest),e.headers=Qe.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Qe.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||tt.adapter)(e).then((function(t){return rt(e),t.data=Ze.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return et(t)||(rt(e),t&&t.response&&(t.response.data=Ze.call(e,t.response.data,t.response.headers,e.transformResponse))),g.reject(t)}))},vt=it,mt=lt,yt=mt.validators;function gt(e){this.defaults=e,this.interceptors={request:new ht,response:new ht}}gt.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=vt(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&mt.assertOptions(t,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var o,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var s=[pt,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(i),o=g.resolve(e);s.length;)o=o.then(s.shift(),s.shift());return o}for(var a=e;n.length;){var u=n.shift(),c=n.shift();try{a=u(a)}catch(e){c(e);break}}try{o=pt(a)}catch(e){return g.reject(e)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},gt.prototype.getUri=function(e){return e=vt(this.defaults,e),dt(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ft.forEach(["delete","get","head","options"],(function(e){gt.prototype[e]=function(t,n){return this.request(vt(n||{},{method:e,url:t,data:(n||{}).data}))}})),ft.forEach(["post","put","patch"],(function(e){gt.prototype[e]=function(t,n,r){return this.request(vt(r||{},{method:e,url:t,data:n}))}}));var bt=gt,wt=_e;function St(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new g((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new g((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new wt(e),t(n.reason))}))}St.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},St.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},St.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},St.source=function(){var e;return{token:new St((function(t){e=t})),cancel:e}};var Et=St,Ct=ue,kt=Z,Ot=bt,At=it;var jt=function e(t){var n=new Ot(t),r=kt(Ot.prototype.request,n);return Ct.extend(r,Ot.prototype,n),Ct.extend(r,n),r.create=function(n){return e(At(t,n))},r}(Ke);jt.Axios=Ot,jt.Cancel=_e,jt.CancelToken=Et,jt.isCancel=Ye,jt.VERSION=st,jt.all=function(e){return g.all(e)},jt.spread=function(e){return function(t){return e.apply(null,t)}},jt.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},Q.exports=jt,Q.exports.default=jt;var xt=Q.exports,_t=N,Tt=function(e,t){return{httpRequest:e,body:t.data,httpStatus:t.status||0,header:(n=t.headers,Object.keys(n).reduce((function(e,t){var r=n[t];return"string"==typeof r?e[t]=r:Array.isArray(r)&&(e[t]=r.join(",")),e}),{})),metadata:{response:t}};var n},Pt=function(e){var t=new _t({message:"[".concat(e.name,"] ").concat(e.message),httpStatus:0,metadata:{axios:e}});return g.reject(t)},Lt=function(){return!0},Nt=function(){function e(){o(this,e),this.Axios=xt.create({validateStatus:Lt})}return s(e,[{key:"requestWithBody",value:function(e){var t=e.body,n=e.method,r=e.timeout,o=e.url,i=e.header,s=e.query;return this.Axios.request({url:o,method:n,headers:i,params:s,data:t,timeout:r}).then((function(t){return Tt(e,t)})).catch(Pt)}},{key:"request",value:function(e){var t=e.method,n=e.timeout,r=e.url,o=e.header,i=e.query;return this.Axios.request({url:r,method:t,headers:o,params:i,timeout:n}).then((function(t){return Tt(e,t)})).catch(Pt)}},{key:"http",value:function(e){return void 0!==e.body?this.requestWithBody(e):this.request(e)}}]),e}(),Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(r,e);var t=f(r);function r(e){o(this,r);var i=new Nt;return t.call(this,n({agent:i},e))}return s(r)}(A),qt=function(e){var t=e.header,n=e.options,r=e.client;return t.Authorization=function(e,t){var n=[],r=t.api_key||e.config.api_key;n.push(["api_key",r]);var o=t.licensee;void 0!==o&&n.push(["licensee",o]);var i=t.user_token;return void 0!==i&&n.push(["user_token",i]),"IDEALPOSTCODES ".concat(Ut(n))}(r,n),t},Ut=function(e){return e.map((function(e){var t=d(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join(" ")},Bt=function(e){var t=e.header,n=e.options.sourceIp;return void 0!==n&&(t["IDPC-Source-IP"]=n),t},Ft=function(e){var t=e.query,n=e.options.filter;return void 0!==n&&(t.filter=n.join(",")),t},It=function(e){var t,n=e.client,r=e.query,o=e.options;return n.config.tags.length&&(t=n.config.tags),o.tags&&(t=o.tags),void 0!==t&&(r.tags=t.join(",")),r},Dt=function(e){return"string"==typeof e},Mt=function(){return!0},Ht=function(e,t){return Dt(e)?t.querySelector(e):e},Jt=function(){return window.document},Gt=function(e){return Dt(e)?Jt().querySelector(e):null===e?Jt():e},$t=function(e,t){var n=e.getAttribute("style");return Object.keys(t).forEach((function(n){return e.style[n]=t[n]})),n},zt=function(e){return e.style.display="none",e},Wt=function(e){return e.style.display="",e},Kt=function(e){null!==e&&null!==e.parentNode&&e.parentNode.removeChild(e)},Vt=function(e,t,n){for(var r=e.querySelectorAll(t),o=0;o<r.length;o++){var i=r[o],s=i.innerText;if(s&&s.trim()===n)return i}return null},Xt=function(e){for(var t,n=(e=String(e)).length,r=-1,o="",i=e.charCodeAt(0);++r<n;)0!=(t=e.charCodeAt(r))?o+=t>=1&&t<=31||127==t||0==r&&t>=48&&t<=57||1==r&&t>=48&&t<=57&&45==i?"\\"+t.toString(16)+" ":(0!=r||1!=n||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?e.charAt(r):"\\"+e.charAt(r):o+="ï¿½";return o},Yt=function(e,t){return e.dispatchEvent(function(e){var t=e.event,n=e.bubbles,r=void 0===n||n,o=e.cancelable,i=void 0===o||o;if("function"==typeof window.Event)return new window.Event(t,{bubbles:r,cancelable:i});var s=document.createEvent("Event");return s.initEvent(t,r,i),s}({event:t}))},Qt=function(e){return null!==e&&e instanceof HTMLSelectElement},Zt=function(e){return null!==e&&e instanceof HTMLInputElement},en=function(e){return null!==e&&e instanceof HTMLTextAreaElement},tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(Zt(e)||en(e))&&on({e:e,value:t,skipTrigger:n})},nn=function(e,t){return null!==t&&null!==e.querySelector('[value="'.concat(t,'"]'))},rn=function(e,t){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value");void 0!==n&&(void 0!==n.set&&n.set.call(e,t))},on=function(e){var t,n,r,o;null!==e.value&&(n=(t=e).e,r=t.value,o=t.skipTrigger,null!==r&&Qt(n)&&(rn(n,r),o||Yt(n,"select"),Yt(n,"change")),function(e){var t=e.e,n=e.value,r=e.skipTrigger;null!==n&&(Zt(t)||en(t))&&(rn(t,n),r||Yt(t,"input"),Yt(t,"change"))}(e))},sn=function(e){return/^GY/.test(e.postcode)?"GG":/^JE/.test(e.postcode)?"JE":null},an="United Kingdom",un="Isle of Man",cn="England",ln="Scotland",fn="Wales",dn="Northern Ireland",hn="Channel Islands",pn=function(e){var t=e.country;if(t===cn)return an;if(t===ln)return an;if(t===fn)return an;if(t===dn)return an;if(t===un)return un;if(t===hn){var n=sn(e);if("GG"===n)return"Guernsey";if("JE"===n)return"Jersey"}return null},vn=function(e,t){if(e){if(Qt(e)){var n=function(e){var t=e.country;return t===cn||t===ln||t===fn||t===dn?"GB":t===un?"IM":t===hn?sn(e):null}(t);nn(e,n)&&on({e:e,value:n});var r=pn(t);nn(e,r)&&on({e:e,value:r})}if(Zt(e)){var o=pn(t);on({e:e,value:o})}}},mn={};"undefined"!=typeof window&&(window.idpcGlobal?mn=window.idpcGlobal:window.idpcGlobal=mn);var yn={};Object.defineProperty(yn,"__esModule",{value:!0});var gn=yn.capitalisePostTown=void 0,bn=/^(of|le|upon|on|the)$/,wn=/\w+&\w+/,Sn=function(e){return(e=e.toLowerCase()).match(bn)?e:e.match(wn)?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)},En=/-/,Cn=/^(in|de|under|upon|y|on|over|the|by)$/,kn=function(e){return null===e.match(En)?e:e.split("-").map((function(e){return e.match(Cn)?e.toLowerCase():Sn(e)})).join("-")},On=/bo'ness/i,An=/bfpo/i,jn=function(e){return e.match(On)?"Bo'Ness":e.match(An)?"BFPO":e};gn=yn.capitalisePostTown=function(e){return e.split(" ").map(Sn).map(kn).map(jn).join(" ")};var xn=function(e){return e.filter((function(e){return Dt(e)?!!e.trim():!!e})).join(", ")},_n=function(e,t){return void 0===e[t]},Tn=function(e,t,n){var r=function(e,t){var n=t.line_1,r=t.line_2,o=t.line_3;return 3===e?[n,r,o]:2===e?[n,xn([r,o]),""]:[xn([n,r,o]),"",""]}(function(e){var t=e.line_2,n=e.line_3;return t?n?3:2:1}(e),t),o=d(r,3),i=o[0],s=o[1],a=o[2];tn(Ht(e.line_1||null,n),i),tn(Ht(e.line_2||null,n),s),tn(Ht(e.line_3||null,n),a)},Pn=function(e,t){var n,r={};for(n in e)if(e.hasOwnProperty(n)){var o=e[n],i=Ht('[name="'.concat(o,'"]'),t);if(i)r[n]=i;else{var s=Ht('[aria-name="'.concat(o,'"]'),t);s&&(r[n]=s)}}return r},Ln=function(e,t){var n,r={};if(void 0===e)return e;for(n in e)if(e.hasOwnProperty(n)){var o=e[n];if(o){var i=Vt(t,"label",o),s=Ht(i,t);if(s){var a=s.getAttribute("for");if(a){var u=t.querySelector("#".concat(Xt(a)));if(u){r[n]=u;continue}}var c=s.querySelector("input");c&&(r[n]=c)}}}return r},Nn=function(e){var t,r,o,i=e.config,s=n({},e.address),a=i.scope,u=i.titleizePostTown,c=i.populateOrganisation,l=i.populateCounty,f=n(n(n({},(t=e).outputFields),Pn(t.names||{},t.config.scope)),Ln(t.labels||{},t.config.scope));for(r in i.removeOrganisation&&Rn(s),u&&(s.post_town=gn(s.post_town)),Tn(f,s,a),delete s.line_1,delete s.line_2,delete s.line_3,vn(Ht(f.country||null,a),s),delete s.country,!1===c&&delete s.organisation_name,!1===l&&delete s.county,f)if(!_n(s,r)&&f.hasOwnProperty(r)){var d=f[r];if(!d)continue;tn(Ht(d,a),(o=void 0,"number"==typeof(o=s[r])?o.toString():void 0===o?"":o))}},Rn=function(e){return 0===e.organisation_name.length||0===e.line_2.length&&0===e.line_3.length||e.line_1===e.organisation_name&&(e.line_1=e.line_2,e.line_2=e.line_3,e.line_3=""),e},qn={13:"Enter",38:"ArrowUp",40:"ArrowDown",36:"Home",35:"End",27:"Escape",8:"Backspace"},Un=["Enter","ArrowUp","ArrowDown","Home","End","Escape","Backspace"],Bn=function(e){return e.keyCode?qn[e.keyCode]||null:(t=e.key,-1!==Un.indexOf(t)?e.key:null);var t},Fn=function(e,t,n){var o,i,s,a,u,c,l,f,d=0,h=!1,p=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=o,r=i;return o=i=void 0,d=t,a=e.apply(r,n)}function y(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-d>=s}function g(){var e=Date.now();if(y(e))return function(e){if(u=void 0,v&&o)return m(e);return o=i=void 0,a}(e);u=setTimeout(g,function(e){var n=e-d,r=t-(e-c);return p?Math.min(r,s-n):r}(e))}function b(){for(var e=Date.now(),n=y(e),r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];if(o=s,i=this,c=e,n){if(void 0===u)return function(e){return d=e,u=setTimeout(g,t),h?m(e):a}(c);if(p)return u=setTimeout(g,t),m(c)}return void 0===u&&(u=setTimeout(g,t)),a}return t=+t||0,f=r(l=n),!l||"object"!=f&&"function"!=f||(h=!!n.leading,s=(p="maxWait"in n)?Math.max(+n.maxWait||0,t):s,v="trailing"in n?!!n.trailing:v),b.cancel=function(){void 0!==u&&clearTimeout(u),d=0,o=c=i=u=void 0},b.pending=function(){return void 0!==u},b},In=function(e){var t=e.bind,n=e.interval,r=void 0===n?1e3:n,o=null,i=function(){null!==o&&(window.clearInterval(o),o=null)};return{start:function(){return o=window.setInterval((function(){try{t()}catch(e){i()}}),r)},stop:i}},Dn=function(e){return window&&window.MutationObserver&&e.mutationObserver?function(e){var t=e.bind,n=e.interval,r=void 0===n?1e3:n,o=e.target,i=void 0===o?window.document:o,s=e.observerConfig,a=void 0===s?{subtree:!0,childList:!0,attributes:!0}:s,u=new MutationObserver(Fn((function(){try{t()}catch(e){c()}}),r)),c=function(){return u.disconnect()};return{start:function(){return u.observe(i,a),null},stop:c}}(e):In(e)},Mn=function(e){return e.preventDefault&&e.preventDefault(),!1},Hn=function(){},Jn=function(){return!1},Gn=function(e){if("Enter"===Bn(e))return e.preventDefault(),this.handleClick(),!1},$n=function(e){return e.cancelable&&e.preventDefault(),this.options.onButtonTrigger.call(this),this.handleClick(),!1},zn=function(){var e=parseInt(this.select.value,10);isNaN(e)||this.selectAddress(e)},Wn={apiKey:"",checkKey:!0,context:"",outputScope:null,onButtonTrigger:Hn,onSearchCompleted:Hn,onAddressesRetrieved:Hn,onAddressSelected:Hn,onSelectCreated:Hn,onSelectRemoved:Hn,onLookupTriggered:Hn,shouldLookupTrigger:function(){return!0},onSearchError:Hn,onLoaded:Hn,onFailedCheck:Hn,onRemove:Hn,onAddressPopulated:Hn,onUnhide:Hn,input:null,inputId:null,inputClass:"idpc-input",inputAriaLabel:"Search a postcode to retrieve your address",placeholder:"Search your postcode",button:null,buttonId:null,buttonLabel:"Find my Address",buttonClass:"idpc-button",selectContainer:null,selectId:null,selectClass:"idpc-select",selectContainerId:null,selectContainerClass:"idpc-select-container",selectAriaLabel:"Select your address",unhide:null,unhideClass:"idpc-unhide",message:null,messageId:null,messageClass:"idpc-error",msgSelect:"Please select your address",msgDisabled:"Finding addresses...",msgNotFound:"Your postcode could not be found. Please type in your address",msgAddressNotFound:"We could not find a match for your address. Please type in your address",msgError:"Sorry, we weren't able to get the address you were looking for. Please type in your address",msgUnhide:"Enter address manually",cooloff:500,removeOrganisation:!1,selectSinglePremise:!1,titleizePostTown:!0,postcodeSearchFormatter:function(e){var t=[e.line_1];return""!==e.line_2&&t.push(e.line_2),t.join(" ")},addressSearchFormatter:function(e){var t=[e.line_1];return""!==e.line_2&&t.push(e.line_2),t.push(e.post_town),t.push(e.postcode_outward),t.join(", ")},outputFields:{},strictlyPostcodes:!0,limit:10,inputStyle:{},buttonStyle:{},messageStyle:{},selectStyle:{},contextStyle:{},hide:[],autocomplete:"none",populateCounty:!0,populateOrganisation:!0},Kn=function(){function e(t){var r,i=this;o(this,e),this.prevContext=null,this.options=n(n(n({},{scope:window.document,document:window.document}),Wn),t),this.client=new Rt(n(n({},this.options),{},{api_key:this.options.apiKey})),this.scope=Gt(this.options.scope),this.document=(r=this.scope)instanceof Document?r:r.ownerDocument?r.ownerDocument:Jt(),this.outputScope=this.findOrCreate(this.options.outputScope,(function(){return i.scope})),this.data=[],this.lastLookup="",this.context=this.findOrCreate(this.options.context),this.prevContext=$t(this.context,this.options.contextStyle),this.keypress=Gn.bind(this),this.click=$n.bind(this),this.selectEvent=zn.bind(this),this.unhideEvent=this.unhideFields.bind(this),this.input=this.createInput(),this.button=this.createButton(),this.message=this.createMessage(),this.select=this.createSelect(),this.selectContainer=this.createContainer(),this.unhide=this.createUnhide(),this.init()}return s(e,[{key:"findOrCreate",value:function(e,t){return Dt(e)?this.scope.querySelector(e):t&&null===e?t():e}},{key:"createUnhide",value:function(){var e=this,t=this.findOrCreate(this.options.unhide,(function(){var t=e.document.createElement("p");return t.innerText=e.options.msgUnhide,t.setAttribute("role","button"),t.setAttribute("tabindex","0"),e.options.unhideClass&&(t.className=e.options.unhideClass),t}));return t.addEventListener("click",this.unhideEvent),t}},{key:"unmountUnhide",value:function(){this.unhide.removeEventListener("click",this.unhideEvent),!this.options.unhide&&this.options.hide.length&&Kt(this.unhide)}},{key:"createContainer",value:function(){var e=this;return this.findOrCreate(this.options.selectContainer,(function(){var t=e.options,n=e.document.createElement("div");return t.selectContainerId&&(n.id=t.selectContainerId),t.selectContainerClass&&(n.className=t.selectContainerClass),n.setAttribute("aria-live","polite"),zt(n),n}))}},{key:"unmountContainer",value:function(){Kt(this.selectContainer)}},{key:"createInput",value:function(){var e=this,t=this.findOrCreate(this.options.input,(function(){var t=e.document.createElement("input"),n=e.options;return t.type="text",n.inputId&&(t.id=n.inputId),n.inputClass&&(t.className=n.inputClass),n.placeholder&&(t.placeholder=n.placeholder),n.inputAriaLabel&&t.setAttribute("aria-label",n.inputAriaLabel),n.autocomplete&&t.setAttribute("autocomplete",n.autocomplete),$t(t,e.options.inputStyle),t}));return t.addEventListener("keypress",this.keypress),t.addEventListener("submit",Jn),t}},{key:"unmountInput",value:function(){this.input.removeEventListener("keypress",this.keypress),this.input.removeEventListener("submit",Jn),null===this.options.input&&Kt(this.input)}},{key:"createButton",value:function(){var e=this,t=this.findOrCreate(this.options.button,(function(){var t=e.document.createElement("button"),n=e.options;return t.type="button",n.buttonLabel&&(t.innerText=n.buttonLabel),n.buttonId&&(t.id=n.buttonId),n.buttonClass&&(t.className=n.buttonClass),$t(t,e.options.buttonStyle),t.onclick=Mn,t}));return t.addEventListener("submit",Jn),t.addEventListener("click",this.click),t}},{key:"unmountButton",value:function(){this.button.removeEventListener("submit",Jn),this.button.removeEventListener("click",this.click),null===this.options.button&&Kt(this.button)}},{key:"createMessage",value:function(){var e=this;return this.findOrCreate(this.options.message,(function(){var t=e.document.createElement("p"),n=e.options;return n.messageClass&&(t.className=n.messageClass),n.messageId&&(t.id=n.messageId),t.setAttribute("role","alert"),$t(t,e.options.messageStyle),zt(t),t}))}},{key:"unmountMessage",value:function(){null===this.options.message&&Kt(this.message)}},{key:"createSelect",value:function(){var e=this.document.createElement("select"),t=this.options;return t.selectId&&(e.id=t.selectId),t.selectClass&&(e.className=t.selectClass),$t(e,this.options.selectStyle),t.selectAriaLabel&&e.setAttribute("aria-label",t.selectAriaLabel),e.addEventListener("change",this.selectEvent),e}},{key:"mountSelect",value:function(e){e&&(this.data=e),function(e){var t;for(t=e.options.length-1;t>=0;t--)e.remove(t)}(this.select),this.select.appendChild(this.createOption("ideal",this.options.msgSelect));for(var t=0;t<this.data.length;t+=1)this.select.appendChild(this.createOption(t.toString(),this.formatAddress(this.data[t])));this.selectContainer.appendChild(this.select),Wt(this.selectContainer),this.options.onSelectCreated.call(this,this.select)}},{key:"unmountSelect",value:function(){Kt(this.select),zt(this.selectContainer),this.options.onSelectRemoved.call(this)}},{key:"selectAddress",value:function(e){var t=this.data[e];t&&(this.populateAddress(t),this.options.onAddressSelected.call(this,t))}},{key:"handleClick",value:function(){if(!this.options.shouldLookupTrigger.call(this))return!1;this.options.onLookupTriggered.call(this);var e=this.input.value;return this.lastLookup===e||(this.lastLookup=e,this.reset(),this.disableButton(),this.executeSearch(e)),!1}},{key:"disableButton",value:function(e){this.options.button||(this.button.setAttribute("disabled","true"),this.button.innerText=e||this.options.msgDisabled)}},{key:"enableButton",value:function(){this.options.button||(this.button.removeAttribute("disabled"),this.button.innerText=this.options.buttonLabel)}},{key:"enableLookup",value:function(){var e=this;if(!this.options.button){var t=this.options.cooloff;if(0===t)return this.enableButton();setTimeout((function(){return e.enableButton()}),t)}}},{key:"reset",value:function(){this.unmountSelect(),this.hideMessage()}},{key:"removeAll",value:function(){var e,t;this.unmountInput(),this.unmountButton(),this.unmountContainer(),this.unmountMessage(),this.unmountUnhide(),e=this.context,t=this.prevContext,e.setAttribute("style",t||""),this.options.onRemove.call(this)}},{key:"notFoundMessage",value:function(){return this.options.strictlyPostcodes?this.options.msgNotFound:this.options.msgAddressNotFound}},{key:"executeSearch",value:function(e){var t=this;return this.enableLookup(),(this.options.strictlyPostcodes?this.searchPostcode(e):this.searchAddress(e)).catch((function(e){if(e instanceof H==!1)throw e;var n=e.response.body.suggestions||[];return n.length>1?(t.suggestionsMessage(n),null):1===n.length?(t.input.value=n[0],t.executeSearch(n[0]),null):[]})).then((function(n){if(null!==n){if(t.options.onSearchCompleted.call(t,null,n),0===n.length)return t.setMessage(t.notFoundMessage());if(t.setMessage(),t.lastLookup=e,t.data=n,t.options.onAddressesRetrieved.call(t,n),t.options.selectSinglePremise&&1===n.length)return t.selectAddress(0);t.mountSelect(n)}})).catch((function(e){t.setMessage(t.options.msgError),t.options.onSearchCompleted.call(t,null,[]),t.options.onSearchError.call(t,e)}))}},{key:"suggestionsMessage",value:function(e){var t=this,n=this.document.createElement("span");n.innerHTML="We couldn't find <b>".concat(this.input.value,"</b>. Did you mean "),e.forEach((function(r,o){var i=t.document.createElement("a");0===o?i.innerText="".concat(r):o===e.length-1?i.innerText=" or ".concat(r):i.innerText=", ".concat(r),i.style.cursor="pointer",i.addEventListener("click",(function(e){e.preventDefault(),t.input.value=r,t.executeSearch(r),t.hideMessage()})),n.appendChild(i)})),Wt(this.message),this.message.innerHTML="",this.message.appendChild(n)}},{key:"searchPostcode",value:function(e){var t=function(e){var t={},n={},r=e.client;qt({client:r,header:t,options:e}),Bt({header:t,options:e}),Ft({query:n,options:e}),It({client:r,query:n,options:e});var o={header:t,query:n};return void 0!==e.timeout&&(o.timeout=e.timeout),o}({client:this.client});return((e,t,n)=>V({resource:"postcodes",client:e})(t,n))(this.client,e,t).then((function(e){return e.body.result}))}},{key:"searchAddress",value:function(e){var t=function(e){var t={},n={query:e.query},r=e.client;qt({client:r,header:t,options:e}),Bt({header:t,options:e}),Ft({query:n,options:e}),It({client:r,query:n,options:e}),function(e){var t=e.query,n=e.options,r=n.page,o=n.limit;void 0!==r&&(t.page=r.toString()),void 0!==o&&(t.limit=o.toString())}({query:n,options:e});var o={header:t,query:n};return void 0!==e.timeout&&(o.timeout=e.timeout),o}({client:this.client,query:e,limit:this.options.limit});return X(this.client,t).then((function(e){return e.body.result.hits}))}},{key:"formatAddress",value:function(e){return(this.options.strictlyPostcodes?this.options.postcodeSearchFormatter:this.options.addressSearchFormatter)(e)}},{key:"createOption",value:function(e,t){var n=this.document.createElement("option");return n.text=t,n.value=e,n}},{key:"setMessage",value:function(e){if(this.message){if(void 0===e)return this.hideMessage();Wt(this.message),this.message.innerText=e}}},{key:"hideMessage",value:function(){this.message&&(this.message.innerText="",zt(this.message))}},{key:"init",value:function(){var e=this,t=function(){e.render(),e.hideFields(),e.options.onLoaded.call(e)};if(!this.options.checkKey)return t();Y({client:this.client}).then((function(e){return e.available?t():g.reject("Key not available")})).catch((function(t){e.options.onFailedCheck&&e.options.onFailedCheck(t)}))}},{key:"populateAddress",value:function(e){this.unhideFields();var t=this.options.outputFields,r=n(n({},this.options),{},{scope:this.outputScope});Nn({outputFields:t,address:e,config:r}),this.options.onAddressPopulated.call(this,e)}},{key:"hiddenFields",value:function(){var e=this;return this.options.hide.map((function(t){return Dt(t)?(n=e.scope,(r=t)?n.querySelector(r):null):t;var n,r})).filter((function(e){return null!==e}))}},{key:"hideFields",value:function(){this.hiddenFields().forEach(zt)}},{key:"unhideFields",value:function(){this.hiddenFields().forEach(Wt),this.options.onUnhide.call(this)}},{key:"render",value:function(){this.context.innerHTML="",this.options.input||this.context.appendChild(this.input),this.options.button||this.context.appendChild(this.button),this.options.selectContainer||this.context.appendChild(this.selectContainer),this.options.message||this.context.appendChild(this.message),!this.options.unhide&&this.options.hide.length&&this.context.appendChild(this.unhide)}}]),e}(),Vn=function(e){var t=new Kn(e);return Xn.push(t),t},Xn=[],Yn=function(){return!0},Qn=function(){},Zn=function(e){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt,r=e,o=t.toUpperCase();"HTML"!==r.tagName;){if(r.tagName===o&&n(r))return r;if(null===r.parentNode)return null;r=r.parentNode}return null}(e,"FORM")},er=function(e,t){var n,r=Gt(e.scope||null).querySelectorAll(e.anchor||e.context||e.scope);return(n=r,Array.prototype.slice.call(n)).filter((function(e){return!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"idpc";return"true"===e.getAttribute(t)}(e,t)}))},tr=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.pageTest,i=void 0===o?Yn:o,s=r.onError,a=void 0===s?Qn:s,u=r.onBindAttempt,c=void 0===u?Qn:u,l=r.onBind,f=void 0===l?Qn:l,d=r.anchor,h=r.onAnchorFound,p=void 0===h?Qn:h,v=r.getScope,m=void 0===v?Zn:v,y=r.marker,g=void 0===y?"idpc-pl":y,b=Dn({bind:function(){try{c(e),er(n({anchor:d},e),g).forEach((function(n){if(i()){var r=m(n);p({anchor:n,scope:r,config:e}),t=Vn(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"idpc";e.setAttribute(t,"true")}(n,g),f(t)}}))}catch(e){a(e)}}}),w=b.start,S=b.stop;return w(),{start:w,stop:S,controller:t}},nr={controllers:Xn,setup:Vn,Controller:Kn,defaults:Wn,watch:tr};e.Controller=Kn,e.PostcodeLookup=nr,e.watch=tr,Object.defineProperty(e,"__esModule",{value:!0})}));
