@using EA.Weee.Core.Helpers
@model EA.Weee.Web.Areas.Scheme.ViewModels.ViewTransferNoteViewModel

<h1 class="govuk-heading-l">Evidence note</h1>

<div class="govuk-width-container govuk-!-margin-top-3">

    <div class="govuk-grid-row govuk-!-width-one-full govuk-!-margin-bottom-1">
        @Html.Gds().DisplayFor(m => m.ReferenceDisplay, Model.ReferenceDisplay, "govuk-grid-column-one-quarter")
    </div>

    <div class="govuk-grid-row govuk-!-margin-bottom-1">
        @Html.Gds().DisplayFor(m => m.Status, Model.Status.ToDisplayString(), "govuk-grid-column-one-quarter")
    </div>

    <div class="govuk-grid-row govuk-!-margin-bottom-1">
        @Html.Gds().DisplayFor(m => m.ComplianceYearDisplay, Model.ComplianceYearDisplay, "govuk-grid-column-one-quarter")
    </div>
</div>
<div class="govuk-width-container govuk-!-padding-top-7 govuk-!-padding-left-0">
    <div class="govuk-grid-column-one-half govuk-!-padding-left-0">
        <span id="site" class="govuk-label--s">Site</span><br />
        <p aria-labelledby="site" class="govuk-body weee-word-break"> @Html.Raw(Model.TransferredByAddress)</p>
    </div>
    <div class="govuk-grid-column-one-half govuk-!-padding-left-0">
        <span id="recipient" class="govuk-label--s">Recipient</span><br />
        <p aria-labelledby="recipient" class="govuk-body weee-word-break">@Html.Raw(Model.RecipientAddress)</p>
    </div>
</div>
<div class="ui-helper-clearfix"></div>
<h2 class="govuk-heading-m govuk-!-padding-top-5 govuk-!-margin-bottom-2">Total transferred (tonnes)</h2>
<table id="transfer-note-tonnage-summary" class="govuk-table">
    <caption class="govuk-table__caption govuk-visually-hidden">Summary of total evidence transferred</caption>
    <thead class="govuk-table__head">
        <tr class="govuk-table__row">
            <th class="govuk-table__header govuk-!-text-align-left  govuk-!-padding-left-2">
                Category
            </th>
            <th class="govuk-table__header govuk-!-text-align-right">
                Total transferred(tonnes)
            </th>
            <th class="govuk-table__header govuk-!-text-align-right govuk-!-padding-right-2">
                Total reused transferred(tonnes)
            </th>
        </tr>
    </thead>
    <tbody class="govuk-table__body">

        @for (var categoryCount = 0; categoryCount < Model.CategoryValues.Count; categoryCount++)
        {
            var item = categoryCount;

            @Html.Hidden("categoryid_to_calculate" + categoryCount, Model.CategoryValues.ElementAt(categoryCount).CategoryId)
            @Html.HiddenFor(m => m.CategoryValues[item].CategoryDisplay)
            var receivedId = "Received" + Model.CategoryValues.ElementAt(categoryCount).CategoryId + "Total";
            var reusedId = "Reused" + Model.CategoryValues.ElementAt(categoryCount).CategoryId + "Total";

            <tr class="govuk-table__row govuk-panel-grey-background">
                <td class="govuk-table__cell govuk-!-padding-left-2">

                    @Model.CategoryValues[categoryCount].CategoryId. @Model.CategoryValues[categoryCount].CategoryDisplay
                </td>

                <td class="govuk-table__cell govuk-!-text-align-right" id="@receivedId">@Model.CategoryValues.ElementAt(categoryCount).TotalReceived</td>
                <td class="govuk-table__cell govuk-!-text-align-right govuk-!-padding-right-2" id="@reusedId">@Model.CategoryValues.ElementAt(categoryCount).TotalReused</td>
            </tr>

        }
    </tbody>
</table>