@using EA.Weee.Web.ViewModels.JoinOrganisation
@model EA.Weee.Web.ViewModels.JoinOrganisation.SelectOrganisationRadioButtons

@{
    var modelMetadata = ViewData.ModelMetadata;
}
@if (Model != null)
{
    @Html.Gds().ValidationMessageFor(model => model.SelectedValue, "Please answer this question")
    <fieldset>
        @if (!String.IsNullOrEmpty(modelMetadata.DisplayName))
        {
            <legend>@modelMetadata.DisplayName</legend>
        }

        @for (int i = 0; i < Model.PossibleValues.Count; i++)
        {
            MvcHtmlString nameForThisValue = Html.NameFor(m => m.PossibleValues[i].Value);

            if (@Model.PossibleValues[i].Value == SelectOrganisationAction.CreateNewOrg)
            {
                <div class="form-group" style="margin-bottom : 10px">
                    <hr />
                </div>
            }

            <label for="@nameForThisValue" class="block-label">
                @Html.HiddenFor(m => m.PossibleValues[i].Key)
                @Html.HiddenFor(m => m.PossibleValues[i].Value)

                @Html.RadioButtonFor(m => m.SelectedValue, Model.PossibleValues[i].Value,
                 htmlAttributes: new { id = nameForThisValue })

                @Html.DisplayFor(m => m.PossibleValues[i].Key)
            </label>
        }
    </fieldset>
}
